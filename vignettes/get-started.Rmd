---
title: "Get Started"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Get Started}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)

library(g2r)
```

g2r is an interface to the [G2.js](https://g2.antv.vision/en) JavaScript visualisation library. G2.js is itself a Grammar of Graphics (GG ~= 2G) though rather different from R's common understanding of such grammar from [ggplot2](https://ggplot2.tidyverse.org/).

g2r's API is halfway between G2.js and ggplot2; some things will be similar to ggplot2 in places.

- `ggplot2::ggplot` -> `g2`
- `ggplot2::aes` -> `asp`
- `ggplot2::scale_*` -> `gauge_*`
- `ggplot2::geom_*` -> `fig_*`
- `ggplot2::facet_*` -> `planes_*`
- `ggplot2::theme_*` -> `motif_*`

The "localisation" or "translation" of the ggplot2 grammar is not just a gimmick it also allows avoiding having one package clash with the other.

## Initialise

Like with ggplot2, one creates visualisations by layering figures (geometries) defines by aspects (aesthetics).

```{r}
g2(cars, asp(speed, dist)) %>% 
  fig_point() %>% 
  fig_smooth()
```

## Gauge

Similarly to ggplot2, axis of the visualisation can be modified with `gauge_*` (scales in ggplot2).

```{r}
g2(cars, asp(speed, dist)) %>% 
  fig_point() %>% 
  fig_smooth(method = "polynomial") %>% 
  gauge_y_log()
```

## Aspects

As in ggplot2, other aspects of the visualisation can be defined. Unlike ggplot2 though, whether these aspects are columns from the data or constants they can only be specified within `asp`.

```{r}
g2(cars, asp(speed, dist, shape = "circle")) %>% 
  fig_point(asp(color = dist, size = dist)) %>% 
  gauge_color(c("#BAE7FF", "#1890FF", "#0050B3"))
```

## Color = Group

Where one uses the `group` aesthetic in ggplot2 one will want to use `color` in g2r; it'll define both the colour and the group.

```{r}
g2(iris, asp(Sepal.Length, Sepal.Width, color = Species)) %>% 
  fig_density()
```

## Adjust

In order to stack bars, or place bars side-by-side, or jitter points one must use the `adjust` function.

```{r}
g2(mtcars, asp(mpg, qsec)) %>% 
  fig_point(asp(shape = "circle")) %>% 
  fig_point(adjust("jitter"))
```

## Planes

G2r also comes with the equivalent of ggplot2's facets, here they are named `planes`.

```{r}
g2(iris, asp(Sepal.Length, Sepal.Width, color = Species)) %>% 
  fig_point(asp(shape = "circle")) %>% 
  planes(~Species, type = "tree")
```

## Quick plots

There is also a function to quickly draw plots based on the class of the object it receives: `qg2`.

```{r}
model <- lm(mpg ~ wt + cyl + disp + gear + hp + am, data = mtcars)

qg2(model)
```
